<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>오늘의 당신에게</title>
  
 <style>
*{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
  
@font-face {
    font-family: 'KCCAhnjunggeun';
    src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2302@1.0/KCCAhnjunggeun.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
}
  
@font-face {
    font-family: 'SunBatang-Light';
    src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_eight@1.0/SunBatang-Light.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}
  
  body {
  text-align: center;
}
  
  .title {
    font-family: 'KCCAhnjunggeun';
    font-size : 3rem;
    padding : 5%, 0%;
  }

.container {
  font-size : 0.8rem;
  font-family: 'SunBatang-Light';
  display: flex;
  justify-content: space-around;
}

.image-list, .video-list {
  margin-bottom: 1rem;
  width: 25%;
  max-height: 500px;
  overflow-y: auto;
  text-align: center;
}

.image-list img{
  padding-top: 2%;
  padding-bottom: 4%;
  max-width: 90%;
  border-bottom: 1px dotted black;
  cursor: pointer;
}

.video-list video {
  max-width: 100%;
  border-bottom: 1px dotted black;
  cursor: pointer;
  margin-bottom: 10px;
}

.result-container {
  width: 40%;
}

#resultCanvas {
  background-color: #f0f0f0;
}
  </style>
  
</head>
<body>
  
  <div class="title">오늘의 당신에게</div>
  
  <div class="container">
    <div class="image-list">
      <h2>문장을 골라주세요</h2>
    </div>
    <div class="result-container">
      <h2>조합 결과</h2>
      <div id="resultContainer"></div>
    </div>
    <div class="video-list">
      <h2>영상을 골라주세요</h2>
    </div>   
  </div>
  
  <div class="container">
    <div class="image-list">
      <div id="imageContainer"></div>
    </div>
    <div class="result-container">
      <canvas id="resultCanvas" width="500" height="500"></canvas>
      <button onclick="downloadImage()">이미지 다운로드</button>
    </div>
    <div class="video-list">
      <div id="videoContainer"></div>
    </div>
  </div>

  <script>
    const imageContainer = document.getElementById('imageContainer');
    const videoContainer = document.getElementById('videoContainer');
    const resultContainer = document.getElementById('resultContainer');
    const resultCanvas = document.getElementById('resultCanvas');
    const ctx = resultCanvas.getContext('2d');
    let selectedImage;
    let selectedVideo;
    
// 이미지 링크 배열 (예시)
const imageLinks = [
  'https://raw.githubusercontent.com/ikkiyoungji/makeimoji/main/image/tree.png',
  'https://raw.githubusercontent.com/ikkiyoungji/makeimoji/main/image/day.png',
  'https://raw.githubusercontent.com/ikkiyoungji/makeimoji/main/image/familiar.png',
  'https://raw.githubusercontent.com/ikkiyoungji/makeimoji/main/image/flower1.png',
  'https://raw.githubusercontent.com/ikkiyoungji/makeimoji/main/image/flower2.png',
  'https://raw.githubusercontent.com/ikkiyoungji/makeimoji/main/image/happy.png',
  'https://raw.githubusercontent.com/ikkiyoungji/makeimoji/main/image/happiness.png',
  'https://raw.githubusercontent.com/ikkiyoungji/makeimoji/main/image/coffee.png',
  'https://raw.githubusercontent.com/ikkiyoungji/makeimoji/main/image/key.png',
  'https://raw.githubusercontent.com/ikkiyoungji/makeimoji/main/image/windy.png',
  'https://raw.githubusercontent.com/ikkiyoungji/makeimoji/main/image/1-m.png',
  // 더 추가할 수 있습니다.
];

// 동영상 링크 배열 (예시)
const videoLinks = [
  '1.mp4',
  '2.mp4',
  '3.mp4',
  '4.mp4',
  '5.mp4',
  '6.mp4',
  '7.mp4',
  '8.mp4',
  '9.mp4',
  '10.mp4',
  // 더 추가할 수 있습니다.
];

imageLinks.forEach(link => {
      const img = new Image();
      img.src = link;
      img.style.cursor = 'pointer';
      img.addEventListener('click', () => {
        selectedImage = img;
        render();
      });
      imageContainer.appendChild(img);
    });

    // 동영상 목록 생성
    videoLinks.forEach(link => {
      const video = document.createElement('video');
      video.src = link;
      video.controls = true;
      video.style.maxWidth = '100%';
      video.style.cursor = 'pointer';
      video.addEventListener('click', () => {
        selectedVideo = video;
        render();
      });
      videoContainer.appendChild(video);
    });

    // 조합 결과 렌더링
    const render = () => {
      resultContainer.innerHTML = '';
      if (selectedImage && selectedVideo) {
        resultContainer.appendChild(selectedVideo);
        selectedVideo.play();
        const imageRatio = selectedImage.width / selectedImage.height;
        const imageHeight = selectedVideo.offsetHeight / 2;
        const imageWidth = imageHeight * imageRatio;
        const imageOverlay = document.createElement('div');
        imageOverlay.style.position = 'relative';
        imageOverlay.style.top = '-50%';
        imageOverlay.style.left = '50%';
        imageOverlay.style.transform = 'translate(-50%, -50%)';
        imageOverlay.innerHTML = `<img src="${selectedImage.src}" width="${imageWidth}" height="${imageHeight}">`;
        resultContainer.appendChild(imageOverlay);
      }
    };

    function downloadImage() {
      resultCanvas.toBlob(function(blob) {
        const url = URL.createObjectURL(blob);
        const tempLink = document.createElement('a');
        tempLink.href = url;
        tempLink.download = 'combined-image.png';
        tempLink.click();
        URL.revokeObjectURL(url);
      }, 'image/png');
    }
  </script>
</body>
</html>
